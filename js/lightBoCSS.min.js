/*
 * JavaScript for progressive enhancement of lightbox.  Primarily to prevent
 * aggressive pre-loading of images (default non-JS behaviour).
 */// wrap everything in an object, avoiding name clashes.
var lightBoCSS={lightBoCSSattached:!1,initialize:function(){"use strict";document.addEventListener("readystatechange",this.attachLightBoCSS,!1)},attachLightBoCSS:function(){"use strict";if(!lightBoCSS.lightBoCSSattached){var e,t,n,r,i,s,o,u,a=document.getElementById("lightbox"),f=this.getElementsByClassName("thumbnails","DIV",a),l=this.getElementsByClassName("lightboximg","DIV",a);for(n=0;n<f.length;n++){o=f[n];t=o.getElementsByTagName("A");for(s=0;s<t.length;s++){u=t[s];lightBoCSS.attachSmallImageClickEvent(u)}}for(r=0;r<l.length;r++){o=l[r];e=o.getElementsByTagName("A");for(i=0;i<e.length;i++)lightBoCSS.attachBigImageClickEvent(e[i])}lightBoCSS.lightBoCSSattached=!0}},attachSmallImageClickEvent:function(e){"use strict";this.attachEvent(e,"click",lightBoCSS.smallImageClickHandler)},attachBigImageClickEvent:function(e){"use strict";this.attachEvent(e,"click",lightBoCSS.bigImageClickHandler)},bigImageClickHandler:function(e){"use strict";var t,n;e=e||window.event;n=e.target||e.srcElement;n.nodeName==="A"?t=n.getElementsByTagName("IMG")[0]:n.nodeName==="IMG"&&(t=n);lightBoCSS.toggleDisplayLightBoCSSImage(t)},smallImageClickHandler:function(e){"use strict";var t,n,r,i,s;e=e||window.event;i=e.target||e.srcElement;if(i.nodeName==="IMG"){s=i.parentElement;t=s.href.replace(/^[^#]+#/,"");n=document.getElementById(t);r=n.getElementsByTagName("IMG")[0];lightBoCSS.toggleDisplayLightBoCSSImage(r)}},toggleDisplayLightBoCSSImage:function(e){"use strict";var t;try{if(!e.lightbox)throw new Error("dummy")}catch(n){e.lightbox=e.getAttribute("data-lightbox")}t=e.src;e.src=e.lightbox;e.lightbox=t},attachEvent:function(e,t,n){"use strict";e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},getElementsByClassName:function(e,t,n){"use strict";var r,i,s,o,u=[],a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;document.getElementsByClassName?lightBoCSS.getElementsByClassName=function(e,t,n){n=n||document;a=n.getElementsByClassName(e);l=t?new RegExp("\\b"+t+"\\b","i"):null;for(h=0,b=a.length;h<b;h+=1){c=a[h];(!l||l.test(c.nodeName))&&u.push(c)}return u}:document.evaluate?lightBoCSS.getElementsByClassName=function(e,t,n){t=t||"*";n=n||document;r=e.split(" ");i="";s="http://www.w3.org/1999/xhtml";o=document.documentElement.namespaceURI===s?s:null;for(p=0,y=r.length;p<y;p+=1)i+="[contains(concat(' ', @class, ' '), ' "+r[p]+" ')]";try{a=document.evaluate(".//"+t+i,n,o,0,null)}catch(l){a=document.evaluate(".//"+t+i,n,null,0,null)}while((f=a.iterateNext())!==null)u.push(f);return u}:lightBoCSS.getElementsByClassName=function(e,t,n){t=t||"*";n=n||document;r=e.split(" ");i=[];a=t==="*"&&n.all?n.all:n.getElementsByTagName(t);for(d=0,g=r.length;d<g;d+=1)i.push(new RegExp("(^|\\s)"+r[d]+"(\\s|$)"));for(v=0,w=a.length;v<w;v+=1){c=a[v];S=!1;for(m=0,E=i.length;m<E;m+=1){S=i[m].test(c.className);if(!S)break}S&&u.push(c)}return u};return lightBoCSS.getElementsByClassName(e,t,n)}};lightBoCSS.initialize();